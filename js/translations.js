// translations.js - Multi-language Support for Kalen Chat Widget
// Supports: English (en), Turkish (tr), German (de)

const khTranslations = {
  en: {
    // Greetings
    greeting: "Hello! I'm the digital consultant for Kalen Holden & Partners.\n\nHow can I help you today? Whether you need:\n\n• Products, suppliers, or buyers\n• Business partnerships\n• Help with local authorities, permits, or contracts\n\nI'm here to assist. What would you like to discuss?",
    
    // UI Elements
    online: "Online",
    offline: "Offline",
    typing: "Typing...",
    send: "Send",
    placeholder: "Type your message...",
    poweredBy: "Powered by Kalen Holden & Partners",
    
    // Quick Replies
    quickReplies: {
      products: "I need products",
      suppliers: "Looking for suppliers",
      buyers: "Need buyers",
      partnership: "Business partnership",
      permits: "Help with permits",
      contracts: "Contract assistance"
    },
    
    // Error Messages
    errors: {
      connection: "I apologize, but I'm having trouble connecting right now. Please try again in a moment or email us at info@kalenholden.com",
      timeout: "The request took too long. Please try again.",
      invalidInput: "Please enter a valid message.",
      apiError: "Service temporarily unavailable. Please contact us at info@kalenholden.com",
      networkError: "Network connection error. Please check your internet connection."
    },
    
    // Success Messages
    success: {
      messageSent: "Message sent successfully",
      contactSaved: "Thank you! We've received your contact information.",
      emailSent: "We'll get back to you shortly via email."
    },
    
    // Contact Form
    contact: {
      name: "Name",
      email: "Email",
      phone: "Phone",
      company: "Company",
      message: "Message",
      submit: "Submit",
      required: "This field is required"
    },
    
    // System Messages
    system: {
      welcomeBack: "Welcome back!",
      newConversation: "Starting a new conversation...",
      conversationEnded: "Conversation ended. Feel free to start a new one!",
      agentTyping: "Our consultant is typing...",
      reconnecting: "Reconnecting..."
    },
    
    // Time Formats
    time: {
      justNow: "Just now",
      minuteAgo: "1 minute ago",
      minutesAgo: "{n} minutes ago",
      hourAgo: "1 hour ago",
      hoursAgo: "{n} hours ago",
      yesterday: "Yesterday",
      daysAgo: "{n} days ago"
    }
  },

  tr: {
    // Selamlamalar
    greeting: "Merhaba! Ben Kalen Holden & Partners'ın dijital danışmanıyım.\n\nSize nasıl yardımcı olabilirim? İhtiyacınız olan:\n\n• Ürün, tedarikçi veya alıcı\n• İş ortaklıkları\n• Yerel yönetimler, izinler veya sözleşmeler konusunda yardım\n\nBuradayım. Ne konuşmak istersiniz?",
    
    // UI Elementleri
    online: "Çevrimiçi",
    offline: "Çevrimdışı",
    typing: "Yazıyor...",
    send: "Gönder",
    placeholder: "Mesajınızı yazın...",
    poweredBy: "Kalen Holden & Partners tarafından desteklenmektedir",
    
    // Hızlı Yanıtlar
    quickReplies: {
      products: "Ürün arıyorum",
      suppliers: "Tedarikçi arıyorum",
      buyers: "Alıcı arıyorum",
      partnership: "İş ortaklığı",
      permits: "İzin konusunda yardım",
      contracts: "Sözleşme desteği"
    },
    
    // Hata Mesajları
    errors: {
      connection: "Özür dilerim, şu anda bağlantı sorunu yaşıyorum. Lütfen bir süre sonra tekrar deneyin veya info@kalenholden.com adresine email gönderin",
      timeout: "İstek çok uzun sürdü. Lütfen tekrar deneyin.",
      invalidInput: "Lütfen geçerli bir mesaj girin.",
      apiError: "Servis geçici olarak kullanılamıyor. Lütfen info@kalenholden.com ile iletişime geçin",
      networkError: "Ağ bağlantı hatası. Lütfen internet bağlantınızı kontrol edin."
    },
    
    // Başarı Mesajları
    success: {
      messageSent: "Mesaj başarıyla gönderildi",
      contactSaved: "Teşekkürler! İletişim bilgilerinizi aldık.",
      emailSent: "Kısa süre içinde email ile size dönüş yapacağız."
    },
    
    // İletişim Formu
    contact: {
      name: "Ad Soyad",
      email: "E-posta",
      phone: "Telefon",
      company: "Şirket",
      message: "Mesaj",
      submit: "Gönder",
      required: "Bu alan zorunludur"
    },
    
    // Sistem Mesajları
    system: {
      welcomeBack: "Tekrar hoş geldiniz!",
      newConversation: "Yeni bir konuşma başlatılıyor...",
      conversationEnded: "Konuşma sona erdi. Yeni bir konuşma başlatabilirsiniz!",
      agentTyping: "Danışmanımız yazıyor...",
      reconnecting: "Yeniden bağlanıyor..."
    },
    
    // Zaman Formatları
    time: {
      justNow: "Az önce",
      minuteAgo: "1 dakika önce",
      minutesAgo: "{n} dakika önce",
      hourAgo: "1 saat önce",
      hoursAgo: "{n} saat önce",
      yesterday: "Dün",
      daysAgo: "{n} gün önce"
    }
  },

  de: {
    // Begrüßungen
    greeting: "Hallo! Ich bin der digitale Berater für Kalen Holden & Partners.\n\nWie kann ich Ihnen heute helfen? Ob Sie benötigen:\n\n• Produkte, Lieferanten oder Käufer\n• Geschäftspartnerschaften\n• Hilfe bei lokalen Behörden, Genehmigungen oder Verträgen\n\nIch bin hier, um zu helfen. Worüber möchten Sie sprechen?",
    
    // UI-Elemente
    online: "Online",
    offline: "Offline",
    typing: "Tippt...",
    send: "Senden",
    placeholder: "Geben Sie Ihre Nachricht ein...",
    poweredBy: "Unterstützt von Kalen Holden & Partners",
    
    // Schnellantworten
    quickReplies: {
      products: "Ich brauche Produkte",
      suppliers: "Suche Lieferanten",
      buyers: "Brauche Käufer",
      partnership: "Geschäftspartnerschaft",
      permits: "Hilfe bei Genehmigungen",
      contracts: "Vertragshilfe"
    },
    
    // Fehlermeldungen
    errors: {
      connection: "Entschuldigung, ich habe gerade Verbindungsprobleme. Bitte versuchen Sie es in einem Moment erneut oder senden Sie uns eine E-Mail an info@kalenholden.com",
      timeout: "Die Anfrage hat zu lange gedauert. Bitte versuchen Sie es erneut.",
      invalidInput: "Bitte geben Sie eine gültige Nachricht ein.",
      apiError: "Service vorübergehend nicht verfügbar. Bitte kontaktieren Sie uns unter info@kalenholden.com",
      networkError: "Netzwerkverbindungsfehler. Bitte überprüfen Sie Ihre Internetverbindung."
    },
    
    // Erfolgsmeldungen
    success: {
      messageSent: "Nachricht erfolgreich gesendet",
      contactSaved: "Vielen Dank! Wir haben Ihre Kontaktinformationen erhalten.",
      emailSent: "Wir werden uns in Kürze per E-Mail bei Ihnen melden."
    },
    
    // Kontaktformular
    contact: {
      name: "Name",
      email: "E-Mail",
      phone: "Telefon",
      company: "Firma",
      message: "Nachricht",
      submit: "Senden",
      required: "Dieses Feld ist erforderlich"
    },
    
    // Systemmeldungen
    system: {
      welcomeBack: "Willkommen zurück!",
      newConversation: "Starte ein neues Gespräch...",
      conversationEnded: "Gespräch beendet. Fühlen Sie sich frei, ein neues zu beginnen!",
      agentTyping: "Unser Berater tippt...",
      reconnecting: "Verbindung wird wiederhergestellt..."
    },
    
    // Zeitformate
    time: {
      justNow: "Gerade eben",
      minuteAgo: "Vor 1 Minute",
      minutesAgo: "Vor {n} Minuten",
      hourAgo: "Vor 1 Stunde",
      hoursAgo: "Vor {n} Stunden",
      yesterday: "Gestern",
      daysAgo: "Vor {n} Tagen"
    }
  }
};

// Helper Functions
function khGetText(key, lang = 'en') {
  const keys = key.split('.');
  let value = khTranslations[lang] || khTranslations.en;
  
  for (const k of keys) {
    value = value[k];
    if (!value) {
      console.warn(`Translation key not found: ${key} for language: ${lang}`);
      return key;
    }
  }
  
  return value;
}

function khFormatTime(timestamp, lang = 'en') {
  const now = new Date();
  const time = new Date(timestamp);
  const diff = Math.floor((now - time) / 1000); // seconds
  
  const translations = khTranslations[lang]?.time || khTranslations.en.time;
  
  if (diff < 60) return translations.justNow;
  if (diff < 120) return translations.minuteAgo;
  if (diff < 3600) return translations.minutesAgo.replace('{n}', Math.floor(diff / 60));
  if (diff < 7200) return translations.hourAgo;
  if (diff < 86400) return translations.hoursAgo.replace('{n}', Math.floor(diff / 3600));
  if (diff < 172800) return translations.yesterday;
  return translations.daysAgo.replace('{n}', Math.floor(diff / 86400));
}

function khGetGreeting(lang = 'en') {
  return khGetText('greeting', lang);
}

function khGetErrorMessage(errorType = 'connection', lang = 'en') {
  return khGetText(`errors.${errorType}`, lang);
}

function khGetQuickReplies(lang = 'en') {
  return khTranslations[lang]?.quickReplies || khTranslations.en.quickReplies;
}

// Export for use in other files
if (typeof module !== 'undefined' && module.exports) {
  module.exports = {
    khTranslations,
    khGetText,
    khFormatTime,
    khGetGreeting,
    khGetErrorMessage,
    khGetQuickReplies
  };
}
